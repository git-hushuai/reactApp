{"ast":null,"code":"import _defineProperty from \"/Users/ewg_mac1/Desktop/Code/ReactCode/DNReact/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/ewg_mac1/Desktop/Code/ReactCode/DNReact/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ewg_mac1/Desktop/Code/ReactCode/DNReact/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ewg_mac1/Desktop/Code/ReactCode/DNReact/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ewg_mac1/Desktop/Code/ReactCode/DNReact/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ewg_mac1/Desktop/Code/ReactCode/DNReact/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/ewg_mac1/Desktop/Code/ReactCode/DNReact/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/ewg_mac1/Desktop/Code/ReactCode/DNReact/src/home/Home.js\";\nimport React, { Component } from 'react';\nimport { Tabs, WhiteSpace, ListView, List } from 'antd-mobile';\nimport DNAxiosTool from '../NetworkCenter/DNAxios';\nimport DNApiName from '../NetworkCenter/DNApiName';\nimport axios from 'axios';\nvar tabs = [{\n  title: '首页',\n  \"category\": ''\n}, {\n  title: 'Android',\n  \"category\": '5562b410e4b00c57d9b94a92',\n  \"type\": ''\n}, {\n  title: '前端',\n  \"category\": '5562b415e4b00c57d9b94ac8',\n  \"type\": ''\n}, {\n  title: 'iOS',\n  \"category\": '5562b405e4b00c57d9b94a41',\n  \"type\": ''\n}, {\n  title: '产品',\n  \"category\": '569cbe0460b23e90721dff38',\n  \"type\": ''\n}, {\n  title: '设计',\n  \"category\": '5562b41de4b00c57d9b94b0f',\n  'type': ''\n}, {\n  title: '后端',\n  'category': '5562b419e4b00c57d9b94ae2',\n  'type': ''\n}];\nvar baseUrl = \"https://timeline-merger-ms.juejin.im\";\nvar Item = List.Item;\n\nif (process.env.NODE_ENV === 'development') {\n  baseUrl = \"http://localhost:3000\";\n}\n\nvar instance = axios.create({\n  // baseURL: 'https://timeline-merger-ms.juejin.im',\n  baseURL: baseUrl,\n  timeout: 10000,\n  responseType: 'json',\n  headers: {\n    'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8'\n  }\n});\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Home).call(this, props)); // const getSectionData = (dataBlob ,sectionID) => dataBlob[sectionID]\n    // const getRowData = (dataBlob ,sectionID ,rowID) => dataBlob[rowID]\n\n    _this.renderContent = function (tab) {\n      return React.createElement(\"div\", {\n        style: {\n          display: 'flex',\n          height: '100%',\n          backgroundColor: '#fff',\n          flexDirection: 'column'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"Content of \", tab.title), React.createElement(ListView, {\n        ref: function ref(el) {\n          return _this.lv = el;\n        },\n        dataSource: _this.state.dataSouce,\n        useBodyScroll: true,\n        renderRow: _this.renderItem,\n        scrollEventThrottle: 200,\n        pageSize: 20,\n        initalPage: 20,\n        onEndReached: _this.loadMore,\n        className: \"am-list sticky-list\",\n        onEndReachedThreshold: 0.01,\n        renderSectionHeader: function renderSectionHeader(sectionData) {\n          console.log('sectionData' + sectionData);\n          return React.createElement(\"div\", {\n            style: {\n              height: 20,\n              width: \"100%\"\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 177\n            },\n            __self: this\n          }, React.createElement(\"label\", {\n            style: {\n              fontSize: 12,\n              textAlign: 'left',\n              color: '#333'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 178\n            },\n            __self: this\n          }, \"\\u70ED\\u95E8\\u63A8\\u8350\"));\n        },\n        renderSeparator: function renderSeparator(section, index) {\n          return React.createElement(\"div\", {\n            style: {\n              height: 10,\n              backgroundColor: '#f3f3f3'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 182\n            },\n            __self: this\n          });\n        } // renderHeader={(item)=> {\n        //     console.log('item' + item)\n        //     return <span>custom header + {item}</span>\n        // }}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }));\n    };\n\n    var da = new ListView.DataSource({\n      // getRowData,\n      // getSectionHeaderData : getSectionData,\n      rowHasChanged: function rowHasChanged(r1, r2) {\n        return r1 != r2;\n      } // sectionHeaderHasChanged: (s1, s2) => s1 !== s2,\n\n    });\n    _this.state = {\n      dataSouce: da.cloneWithRows([]),\n      pageIndex: 1,\n      noMoreData: false\n    };\n    _this.dsDataLists = [];\n    _this.renderItem = _this.renderItem.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // this.getHotRecommendInfo()\n      this.getHomeHotRecommendListInfo();\n    }\n  }, {\n    key: \"loadMore\",\n    value: function loadMore() {\n      console.log('加载更多');\n    } // 获取首页热门列表数据\n\n  }, {\n    key: \"getHomeHotRecommendListInfo\",\n    value: function getHomeHotRecommendListInfo() {\n      this.dsDataLists = this.state.dataSouce._dataBlob.entrylist;\n      var self = this;\n      DNAxiosTool.get(DNApiName.ApiForEntryHotRecomment, {\n        params: _defineProperty({\n          \"device_id\": 'D2F3A47D-6BCA-446A-8D91-C2B7F1068DE1',\n          \"limit\": '3',\n          \"src\": 'ios',\n          \"token\": \"eyJhY2Nlc3NfdG9rZW4iOiJWMGZIQjNYd1ROazZNRXEzIiwicmVmcmVzaF90b2tlbiI6IllOT3hBMXhOSVU4dXNiSmEiLCJ0b2tlbl90eXBlIjoibWFjIiwiZXhwaXJlX2luIjoyNTkyMDAwfQ==\",\n          \"uid\": \"5b8390f3e51d45389d3b5028\",\n          \"before\": ''\n        }, \"limit\", '20')\n      }).then(function (rsp) {\n        console.log(rsp);\n\n        if (rsp) {\n          self.dsDataLists = self.dsDataLists.concat(rsp.d.entry); // self.setState({\n          //     dataSouce : self.state.dataSouce.cloneWithRowsAndSections(self.dsDataLists)\n          // })\n\n          debugger;\n          self.setState({\n            dataSouce: self.state.dataSouce.cloneWithRowsAndSections(self.dsDataLists)\n          }, function () {\n            debugger;\n          });\n        }\n      }).catch(function (err) {});\n    } // 获取首页热门推荐数据\n\n  }, {\n    key: \"getHotRecommendInfo\",\n    value: function getHotRecommendInfo(param) {\n      var self = this;\n      DNAxiosTool.get(DNApiName.ApiForEntryHotRecomment, {\n        params: {\n          \"device_id\": 'D2F3A47D-6BCA-446A-8D91-C2B7F1068DE1',\n          \"limit\": '3',\n          \"src\": 'ios',\n          \"token\": \"eyJhY2Nlc3NfdG9rZW4iOiJWMGZIQjNYd1ROazZNRXEzIiwicmVmcmVzaF90b2tlbiI6IllOT3hBMXhOSVU4dXNiSmEiLCJ0b2tlbl90eXBlIjoibWFjIiwiZXhwaXJlX2luIjoyNTkyMDAwfQ==\",\n          \"uid\": \"5b8390f3e51d45389d3b5028\"\n        }\n      }).then(function (rsp) {\n        console.log(rsp); // self.dsDataLists = self.dsDataLists.concat(rsp.d.entry);\n        // self.setState({\n        //     dataSouce : self.state.dataSouce.cloneWithRowsAndSections(self.dsDataLists)\n        // })\n\n        self.setState({\n          dataSouce: self.state.dataSouce.cloneWithRowsAndSections(rsp.d.entry)\n        }, function () {});\n      }).catch(function (err) {});\n    } // 渲染Cell\n\n  }, {\n    key: \"renderItem\",\n    value: function renderItem(item, section, pageIndex) {\n      console.log('item' + item + '/n' + 'section' + section + '/n' + 'pageindex' + pageIndex + '/n');\n      var itemList = this.state.dataSouce._dataBlob.entrylist;\n      var itemModel = itemList[pageIndex];\n      return React.createElement(\"div\", {\n        key: pageIndex,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          height: 80,\n          backgroundColor: 'white',\n          alignSelf: 'left',\n          textAlign: 'left',\n          marginLeft: 12,\n          marginRight: 12,\n          flexDirection: \"row\",\n          display: 'flex'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          height: 80,\n          flexDirection: 'column',\n          flex: 1,\n          display: 'flex',\n          marginLeft: 0\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        style: {\n          fontSize: 12,\n          color: '#333',\n          fontWeight: 'bold',\n          display: 'block',\n          marginTop: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, itemModel.title), React.createElement(\"label\", {\n        style: {\n          fontSize: 12,\n          color: '#333',\n          marginTop: 10,\n          display: 'block'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, itemModel.collectionCount, \"\\u4EBA\\u8D5E \\xB7 \", itemModel.user.username, \" \\xB7 1\\u5929\\u524D\")), itemModel.screenshot ? React.createElement(\"div\", {\n        style: {\n          marginRight: 0,\n          width: 60,\n          height: 60,\n          backgroundColor: 'red',\n          alignSelf: 'center'\n        },\n        dis: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        alt: \"404\",\n        style: {\n          height: 60,\n          width: 60,\n          backgroundColor: 'gray',\n          alignSelf: 'center',\n          display: 'flex',\n          marginRight: 0\n        },\n        src: itemModel.screenshot,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      })) : null));\n    } // 标签内容\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          height: \"100%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(Tabs, {\n        tabs: tabs,\n        initalPage: '2',\n        renderTabBar: function renderTabBar(props) {\n          return React.createElement(Tabs.DefaultTabBar, Object.assign({}, props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 201\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, this.renderContent)));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nexport { Home as default };","map":{"version":3,"sources":["/Users/ewg_mac1/Desktop/Code/ReactCode/DNReact/src/home/Home.js"],"names":["React","Component","Tabs","WhiteSpace","ListView","List","DNAxiosTool","DNApiName","axios","tabs","title","baseUrl","Item","process","env","NODE_ENV","instance","create","baseURL","timeout","responseType","headers","Home","props","renderContent","tab","display","height","backgroundColor","flexDirection","el","lv","state","dataSouce","renderItem","loadMore","sectionData","console","log","width","fontSize","textAlign","color","section","index","da","DataSource","rowHasChanged","r1","r2","cloneWithRows","pageIndex","noMoreData","dsDataLists","bind","getHomeHotRecommendListInfo","_dataBlob","entrylist","self","get","ApiForEntryHotRecomment","params","then","rsp","concat","d","entry","setState","cloneWithRowsAndSections","catch","err","param","item","itemList","itemModel","alignSelf","marginLeft","marginRight","flex","fontWeight","marginTop","collectionCount","user","username","screenshot"],"mappings":";;;;;;;;AACA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,SAAQC,IAAR,EAAcC,UAAd,EAA2BC,QAA3B,EAAqCC,IAArC,QAAgD,aAAhD;AACA,OAAOC,WAAP,MAAwB,0BAAxB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,IAAMC,IAAI,GAAG,CACT;AAAEC,EAAAA,KAAK,EAAE,IAAT;AAAmB,cAAa;AAAhC,CADS,EAET;AAAEA,EAAAA,KAAK,EAAE,SAAT;AAAqB,cAAa,0BAAlC;AAA+D,UAAQ;AAAvE,CAFS,EAGT;AAAEA,EAAAA,KAAK,EAAE,IAAT;AAAoB,cAAa,0BAAjC;AAA8D,UAAQ;AAAtE,CAHS,EAIT;AAAEA,EAAAA,KAAK,EAAE,KAAT;AAAqB,cAAa,0BAAlC;AAA+D,UAAU;AAAzE,CAJS,EAKT;AAAEA,EAAAA,KAAK,EAAE,IAAT;AAAoB,cAAa,0BAAjC;AAA8D,UAAS;AAAvE,CALS,EAMT;AAAEA,EAAAA,KAAK,EAAE,IAAT;AAAoB,cAAa,0BAAjC;AAA8D,UAAS;AAAvE,CANS,EAOT;AAAEA,EAAAA,KAAK,EAAE,IAAT;AAAoB,cAAa,0BAAjC;AAA8D,UAAS;AAAvE,CAPS,CAAb;AAUA,IAAIC,OAAO,GAAG,sCAAd;IACQC,I,GAASP,I,CAATO,I;;AAER,IAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAA5B,EAA0C;AACtCJ,EAAAA,OAAO,GAAG,uBAAV;AACH;;AAED,IAAIK,QAAQ,GAAGR,KAAK,CAACS,MAAN,CAAa;AACxB;AACAC,EAAAA,OAAO,EAACP,OAFgB;AAGxBQ,EAAAA,OAAO,EAAE,KAHe;AAIxBC,EAAAA,YAAY,EAAG,MAJS;AAKxBC,EAAAA,OAAO,EAAE;AACL,oBAAgB;AADX;AALe,CAAb,CAAf;;IAUqBC,I;;;;;AAEjB,gBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AACd,8EAAMA,KAAN,GADc,CAGd;AACA;;AAJc,UAyHlBC,aAzHkB,GAyHF,UAAAC,GAAG;AAAA,aACf;AAAK,QAAA,KAAK,EAAE;AAAEC,UAAAA,OAAO,EAAE,MAAX;AAAmBC,UAAAA,MAAM,EAAE,MAA3B;AAAmCC,UAAAA,eAAe,EAAE,MAApD;AAA4DC,UAAAA,aAAa,EAAC;AAA1E,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAeJ,GAAG,CAACf,KAAnB,CADJ,EAGI,oBAAC,QAAD;AACI,QAAA,GAAG,EAAI,aAAAoB,EAAE;AAAA,iBAAI,MAAKC,EAAL,GAAUD,EAAd;AAAA,SADb;AAEI,QAAA,UAAU,EAAI,MAAKE,KAAL,CAAWC,SAF7B;AAGI,QAAA,aAAa,MAHjB;AAII,QAAA,SAAS,EAAE,MAAKC,UAJpB;AAKI,QAAA,mBAAmB,EAAE,GALzB;AAMI,QAAA,QAAQ,EAAE,EANd;AAOI,QAAA,UAAU,EAAE,EAPhB;AAQI,QAAA,YAAY,EAAE,MAAKC,QARvB;AASI,QAAA,SAAS,EAAC,qBATd;AAUI,QAAA,qBAAqB,EAAE,IAV3B;AAWI,QAAA,mBAAmB,EAAE,6BAAAC,WAAW,EAAI;AAChCC,UAAAA,OAAO,CAACC,GAAR,CAAY,gBAAgBF,WAA5B;AACA,iBAAO;AAAK,YAAA,KAAK,EAAE;AAACT,cAAAA,MAAM,EAAC,EAAR;AAAWY,cAAAA,KAAK,EAAC;AAAjB,aAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACH;AAAO,YAAA,KAAK,EAAE;AAACC,cAAAA,QAAQ,EAAC,EAAV;AAAaC,cAAAA,SAAS,EAAC,MAAvB;AAA8BC,cAAAA,KAAK,EAAC;AAApC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCADG,CAAP;AAGH,SAhBL;AAiBI,QAAA,eAAe,EAAE,yBAACC,OAAD,EAASC,KAAT,EAAiB;AAC9B,iBAAQ;AAAK,YAAA,KAAK,EAAE;AAACjB,cAAAA,MAAM,EAAC,EAAR;AAAWC,cAAAA,eAAe,EAAC;AAA3B,aAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAR;AACH,SAnBL,CAoBI;AACA;AACA;AACA;AAvBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHJ,CADe;AAAA,KAzHD;;AAMd,QAAIiB,EAAE,GAAG,IAAIzC,QAAQ,CAAC0C,UAAb,CAAwB;AAC7B;AACA;AACAC,MAAAA,aAAa,EAAC,uBAACC,EAAD,EAAIC,EAAJ,EAAS;AAAC,eAAOD,EAAE,IAAIC,EAAb;AAAiB,OAHZ,CAI7B;;AAJ6B,KAAxB,CAAT;AAOA,UAAKjB,KAAL,GAAa;AACTC,MAAAA,SAAS,EAAGY,EAAE,CAACK,aAAH,CAAiB,EAAjB,CADH;AAETC,MAAAA,SAAS,EAAG,CAFH;AAGTC,MAAAA,UAAU,EAAG;AAHJ,KAAb;AAKA,UAAKC,WAAL,GAAmB,EAAnB;AACA,UAAKnB,UAAL,GAAkB,MAAKA,UAAL,CAAgBoB,IAAhB,uDAAlB;AAnBc;AAoBjB;;;;wCAEkB;AACf;AACA,WAAKC,2BAAL;AACH;;;+BAES;AACNlB,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACH,K,CAED;;;;kDAC6B;AAEzB,WAAKe,WAAL,GAAmB,KAAKrB,KAAL,CAAWC,SAAX,CAAqBuB,SAArB,CAA+BC,SAAlD;AACA,UAAIC,IAAI,GAAG,IAAX;AACApD,MAAAA,WAAW,CAACqD,GAAZ,CAAgBpD,SAAS,CAACqD,uBAA1B,EAAkD;AAC9CC,QAAAA,MAAM;AACF,uBAAc,sCADZ;AAEF,mBAAU,GAFR;AAGF,iBAAQ,KAHN;AAIF,mBAAU,sJAJR;AAKF,iBAAQ,0BALN;AAMF,oBAAU;AANR,oBAOQ,IAPR;AADwC,OAAlD,EAUGC,IAVH,CAUQ,UAAAC,GAAG,EAAE;AACT1B,QAAAA,OAAO,CAACC,GAAR,CAAYyB,GAAZ;;AACA,YAAGA,GAAH,EAAO;AACHL,UAAAA,IAAI,CAACL,WAAL,GAAmBK,IAAI,CAACL,WAAL,CAAiBW,MAAjB,CAAwBD,GAAG,CAACE,CAAJ,CAAMC,KAA9B,CAAnB,CADG,CAEH;AACA;AACA;;AACA;AACAR,UAAAA,IAAI,CAACS,QAAL,CAAc;AACVlC,YAAAA,SAAS,EAAGyB,IAAI,CAAC1B,KAAL,CAAWC,SAAX,CAAqBmC,wBAArB,CAA8CV,IAAI,CAACL,WAAnD;AADF,WAAd,EAEE,YAAI;AACF;AACH,WAJD;AAKH;AACJ,OAxBD,EAwBGgB,KAxBH,CAwBS,UAAAC,GAAG,EAAE,CAEb,CA1BD;AA2BH,K,CAED;;;;wCACoBC,K,EAAM;AACtB,UAAIb,IAAI,GAAG,IAAX;AACApD,MAAAA,WAAW,CAACqD,GAAZ,CAAgBpD,SAAS,CAACqD,uBAA1B,EAAoD;AAChDC,QAAAA,MAAM,EAAE;AACR,uBAAc,sCADN;AAER,mBAAU,GAFF;AAGR,iBAAQ,KAHA;AAIR,mBAAU,sJAJF;AAKR,iBAAQ;AALA;AADwC,OAApD,EAQGC,IARH,CAQQ,UAAAC,GAAG,EAAI;AACX1B,QAAAA,OAAO,CAACC,GAAR,CAAYyB,GAAZ,EADW,CAEX;AACA;AACA;AACA;;AACAL,QAAAA,IAAI,CAACS,QAAL,CAAc;AACVlC,UAAAA,SAAS,EAAGyB,IAAI,CAAC1B,KAAL,CAAWC,SAAX,CAAqBmC,wBAArB,CAA8CL,GAAG,CAACE,CAAJ,CAAMC,KAApD;AADF,SAAd,EAEE,YAAI,CACL,CAHD;AAKH,OAnBD,EAmBGG,KAnBH,CAmBS,UAAAC,GAAG,EAAI,CACf,CApBD;AAqBH,K,CACD;;;;+BACWE,I,EAAM7B,O,EAASQ,S,EAAU;AAChCd,MAAAA,OAAO,CAACC,GAAR,CAAY,SAASkC,IAAT,GAAe,IAAf,GAAsB,SAAtB,GAAkC7B,OAAlC,GAA4C,IAA5C,GAAmD,WAAnD,GAAiEQ,SAAjE,GAA6E,IAAzF;AACA,UAAIsB,QAAQ,GAAG,KAAKzC,KAAL,CAAWC,SAAX,CAAqBuB,SAArB,CAA+BC,SAA9C;AACA,UAAIiB,SAAS,GAAGD,QAAQ,CAACtB,SAAD,CAAxB;AACA,aACI;AAAK,QAAA,GAAG,EAAEA,SAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,KAAK,EAAE;AAACxB,UAAAA,MAAM,EAAC,EAAR;AAAWC,UAAAA,eAAe,EAAC,OAA3B;AAAmC+C,UAAAA,SAAS,EAAC,MAA7C;AAAoDlC,UAAAA,SAAS,EAAC,MAA9D;AAAqEmC,UAAAA,UAAU,EAAC,EAAhF;AAAmFC,UAAAA,WAAW,EAAC,EAA/F;AAAkGhD,UAAAA,aAAa,EAAC,KAAhH;AAAsHH,UAAAA,OAAO,EAAC;AAA9H,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI;AAAK,QAAA,KAAK,EAAE;AAACC,UAAAA,MAAM,EAAC,EAAR;AAAWE,UAAAA,aAAa,EAAC,QAAzB;AAAkCiD,UAAAA,IAAI,EAAC,CAAvC;AAAyCpD,UAAAA,OAAO,EAAC,MAAjD;AAAwDkD,UAAAA,UAAU,EAAC;AAAnE,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAO,QAAA,KAAK,EAAE;AAACpC,UAAAA,QAAQ,EAAC,EAAV;AAAaE,UAAAA,KAAK,EAAC,MAAnB;AAA0BqC,UAAAA,UAAU,EAAC,MAArC;AAA4CrD,UAAAA,OAAO,EAAC,OAApD;AAA4DsD,UAAAA,SAAS,EAAC;AAAtE,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA0FN,SAAS,CAAChE,KAApG,CADJ,EAEI;AAAO,QAAA,KAAK,EAAE;AAAC8B,UAAAA,QAAQ,EAAC,EAAV;AAAaE,UAAAA,KAAK,EAAC,MAAnB;AAA0BsC,UAAAA,SAAS,EAAC,EAApC;AAAuCtD,UAAAA,OAAO,EAAC;AAA/C,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAwEgD,SAAS,CAACO,eAAlF,wBAAwGP,SAAS,CAACQ,IAAV,CAAeC,QAAvH,wBAFJ,CAFJ,EAOKT,SAAS,CAACU,UAAV,GAAuB;AAAK,QAAA,KAAK,EAAE;AAACP,UAAAA,WAAW,EAAC,CAAb;AAAetC,UAAAA,KAAK,EAAC,EAArB;AAAwBZ,UAAAA,MAAM,EAAC,EAA/B;AAAkCC,UAAAA,eAAe,EAAC,KAAlD;AAAwD+C,UAAAA,SAAS,EAAC;AAAlE,SAAZ;AAAyF,QAAA,GAAG,MAA5F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACpB;AACA,QAAA,GAAG,EAAC,KADJ;AAEA,QAAA,KAAK,EAAE;AAAChD,UAAAA,MAAM,EAAC,EAAR;AAAWY,UAAAA,KAAK,EAAC,EAAjB;AAAoBX,UAAAA,eAAe,EAAC,MAApC;AAA2C+C,UAAAA,SAAS,EAAC,QAArD;AAA8DjD,UAAAA,OAAO,EAAC,MAAtE;AAA6EmD,UAAAA,WAAW,EAAC;AAAzF,SAFP;AAGA,QAAA,GAAG,EAAEH,SAAS,CAACU,UAHf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADoB,CAAvB,GAOQ,IAdb,CADJ,CADJ;AAuBH,K,CAED;;;;6BAmCQ;AACJ,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI;AAAK,QAAA,KAAK,EAAE;AAAEzD,UAAAA,MAAM,EAAE;AAAV,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAElB,IAAZ;AACI,QAAA,UAAU,EAAE,GADhB;AAEI,QAAA,YAAY,EAAE,sBAAAc,KAAK;AAAA,iBAAI,oBAAC,IAAD,CAAM,aAAN,oBAAwBA,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAJ;AAAA,SAFvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIC,KAAKC,aAJN,CADJ,CAFJ,CADJ;AAaH;;;;EA3K6BvB,S;;SAAbqB,I","sourcesContent":["\nimport React, { Component } from 'react';\n\nimport {Tabs, WhiteSpace , ListView, List} from 'antd-mobile'\nimport DNAxiosTool from '../NetworkCenter/DNAxios'\nimport DNApiName from '../NetworkCenter/DNApiName'\n\nimport axios from 'axios'\n\nconst tabs = [\n    { title: '首页'    , \"category\" : ''},\n    { title: 'Android' , \"category\" : '5562b410e4b00c57d9b94a92' , \"type\" :''},\n    { title: '前端'     , \"category\" : '5562b415e4b00c57d9b94ac8' , \"type\" :''},\n    { title: 'iOS'     , \"category\" : '5562b405e4b00c57d9b94a41' , \"type\"  : ''},\n    { title: '产品'     , \"category\" : '569cbe0460b23e90721dff38' , \"type\" : ''},\n    { title: '设计'     , \"category\" : '5562b41de4b00c57d9b94b0f' , 'type' : ''},\n    { title: '后端'     , 'category' : '5562b419e4b00c57d9b94ae2' , 'type' : ''},\n];\n\nlet baseUrl = \"https://timeline-merger-ms.juejin.im\";\nconst { Item } = List\n\nif(process.env.NODE_ENV === 'development'){\n    baseUrl = \"http://localhost:3000\"\n}\n\nvar instance = axios.create({\n    // baseURL: 'https://timeline-merger-ms.juejin.im',\n    baseURL:baseUrl,\n    timeout: 10000,\n    responseType : 'json',\n    headers: {\n        'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8',\n    }\n  });\n\nexport default class Home extends Component{\n\n    constructor(props){\n        super(props)\n\n        // const getSectionData = (dataBlob ,sectionID) => dataBlob[sectionID]\n        // const getRowData = (dataBlob ,sectionID ,rowID) => dataBlob[rowID]\n\n        var da = new ListView.DataSource({\n            // getRowData,\n            // getSectionHeaderData : getSectionData,\n            rowHasChanged:(r1,r2)=>{return r1 != r2 },\n            // sectionHeaderHasChanged: (s1, s2) => s1 !== s2,\n        })\n\n        this.state = {\n            dataSouce : da.cloneWithRows([]),\n            pageIndex : 1,\n            noMoreData : false\n        }\n        this.dsDataLists = [];\n        this.renderItem = this.renderItem.bind(this);\n    }\n\n    componentDidMount(){\n        // this.getHotRecommendInfo()\n        this.getHomeHotRecommendListInfo()\n    }\n\n    loadMore(){\n        console.log('加载更多');\n    }\n\n    // 获取首页热门列表数据\n    getHomeHotRecommendListInfo(){\n\n        this.dsDataLists = this.state.dataSouce._dataBlob.entrylist\n        var self = this\n        DNAxiosTool.get(DNApiName.ApiForEntryHotRecomment,{\n            params: {\n                \"device_id\" : 'D2F3A47D-6BCA-446A-8D91-C2B7F1068DE1',\n                \"limit\" : '3',\n                \"src\" : 'ios',\n                \"token\" : \"eyJhY2Nlc3NfdG9rZW4iOiJWMGZIQjNYd1ROazZNRXEzIiwicmVmcmVzaF90b2tlbiI6IllOT3hBMXhOSVU4dXNiSmEiLCJ0b2tlbl90eXBlIjoibWFjIiwiZXhwaXJlX2luIjoyNTkyMDAwfQ==\",\n                \"uid\" : \"5b8390f3e51d45389d3b5028\",\n                \"before\" :'',\n                \"limit\" : '20'\n            }\n        }).then(rsp=>{\n            console.log(rsp);\n            if(rsp){\n                self.dsDataLists = self.dsDataLists.concat(rsp.d.entry);\n                // self.setState({\n                //     dataSouce : self.state.dataSouce.cloneWithRowsAndSections(self.dsDataLists)\n                // })\n                debugger\n                self.setState({\n                    dataSouce : self.state.dataSouce.cloneWithRowsAndSections(self.dsDataLists)\n                },()=>{\n                    debugger\n                })\n            }\n        }).catch(err=>{\n\n        });\n    }\n\n    // 获取首页热门推荐数据\n    getHotRecommendInfo(param){\n        var self = this\n        DNAxiosTool.get(DNApiName.ApiForEntryHotRecomment , {\n            params: {\n            \"device_id\" : 'D2F3A47D-6BCA-446A-8D91-C2B7F1068DE1',\n            \"limit\" : '3',\n            \"src\" : 'ios',\n            \"token\" : \"eyJhY2Nlc3NfdG9rZW4iOiJWMGZIQjNYd1ROazZNRXEzIiwicmVmcmVzaF90b2tlbiI6IllOT3hBMXhOSVU4dXNiSmEiLCJ0b2tlbl90eXBlIjoibWFjIiwiZXhwaXJlX2luIjoyNTkyMDAwfQ==\",\n            \"uid\" : \"5b8390f3e51d45389d3b5028\"\n            }\n        }).then(rsp => {\n            console.log(rsp)\n            // self.dsDataLists = self.dsDataLists.concat(rsp.d.entry);\n            // self.setState({\n            //     dataSouce : self.state.dataSouce.cloneWithRowsAndSections(self.dsDataLists)\n            // })\n            self.setState({\n                dataSouce : self.state.dataSouce.cloneWithRowsAndSections(rsp.d.entry)\n            },()=>{\n            })\n\n        }).catch(err => {\n        })\n    }\n    // 渲染Cell\n    renderItem(item ,section ,pageIndex){\n        console.log('item' + item +'/n' + 'section' + section + '/n' + 'pageindex' + pageIndex + '/n')\n        let itemList = this.state.dataSouce._dataBlob.entrylist;\n        let itemModel = itemList[pageIndex]\n        return (\n            <div key={pageIndex}>\n                <div style={{height:80,backgroundColor:'white',alignSelf:'left',textAlign:'left',marginLeft:12,marginRight:12,flexDirection:\"row\",display:'flex'}}>\n\n                    <div style={{height:80,flexDirection:'column',flex:1,display:'flex',marginLeft:0}}>\n                        <label style={{fontSize:12,color:'#333',fontWeight:'bold',display:'block',marginTop:10}}>{itemModel.title}</label>\n                        <label style={{fontSize:12,color:'#333',marginTop:10,display:'block'}}>{itemModel.collectionCount}人赞 · {itemModel.user.username} · 1天前</label>\n                    </div>\n                    {/* 条件渲染 */}\n                    {itemModel.screenshot ? <div style={{marginRight:0,width:60,height:60,backgroundColor:'red',alignSelf:'center'}} dis>\n                        <img \n                        alt='404'\n                        style={{height:60,width:60,backgroundColor:'gray',alignSelf:'center',display:'flex',marginRight:0,}}\n                        src={itemModel.screenshot}\n                        >\n                    </img>\n                    </div> : null }\n                    \n\n                 \n                </div>\n            </div>\n        );\n    }\n\n    // 标签内容\n    renderContent = tab =>(\n        <div style={{ display: 'flex', height: '100%', backgroundColor: '#fff' ,flexDirection:'column'}}>\n            <p>Content of {tab.title}</p>\n\n            <ListView\n                ref = {el => this.lv = el}\n                dataSource = {this.state.dataSouce}\n                useBodyScroll\n                renderRow={this.renderItem}\n                scrollEventThrottle={200}\n                pageSize={20}\n                initalPage={20}\n                onEndReached={this.loadMore}\n                className=\"am-list sticky-list\"\n                onEndReachedThreshold={0.01}\n                renderSectionHeader={sectionData => {\n                    console.log('sectionData' + sectionData);\n                    return <div style={{height:20,width:\"100%\"}}>\n                        <label style={{fontSize:12,textAlign:'left',color:'#333'}}>热门推荐</label>\n                    </div>\n                }}\n                renderSeparator={(section,index)=>{\n                    return (<div style={{height:10,backgroundColor:'#f3f3f3'}}></div>)\n                }}\n                // renderHeader={(item)=> {\n                //     console.log('item' + item)\n                //     return <span>custom header + {item}</span>\n                // }}\n\n            ></ListView>\n            \n        </div>\n    );\n\n    render(){\n        return (\n            <div>\n                {/* 顶部导航栏 */}\n                <div style={{ height: \"100%\" }}>\n                    <Tabs tabs={tabs}\n                        initalPage={'2'}\n                        renderTabBar={props => <Tabs.DefaultTabBar {...props} />}\n                    >\n                    {this.renderContent}\n                    </Tabs>\n                </div>\n            </div>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}